<!DOCTYPE html>
<html lang="en" ng-app="Jubi"  ng-style="getMainCanvasStyle()" ng-controller="RootController as c" ng-init="c.init('<%- model.slug %>')">
<head>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="<%- config.web.contentUrl %>/img/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <title><%- title %></title>
    <link href="<%- config.web.contentUrl %>/css/app/main.css" rel="stylesheet"/>

    <script type="text/javascript" src="<%- config.web.contentUrl %>/js/lib/jquery.min.js"></script>

    <script>
        var _jubi_clientData = <%- JSON.stringify(clientInitData()) %>;
    </script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body class="user-layout" ng-style="getMainCanvasStyle()">

<!--[if lt IE 7]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->


<div ng-show="loading.isLoading > 0"  style="position: relative;" ng-cloak  ng-style="getBackgroundFontStyle()">
    <div class="loading">
        <span us-spinner="{radius:30, width:8, length: 16, color: getBackgroundFontColor()}"></span>
        <div ng-style="getBackgroundFontStyle()">One moment please...</div>
    </div>
</div>

<div class="viewport clearfix" ng-show="loading.isLoading <= 0" ng-cloak>

    <!-- Header -->
    <header id="headerBar" class="header">
        <nav role="navigation">
            <%- partial('user/partials/header') %>
        </nav>
    </header>

    <nav id="topNavBar" style="overflow:auto" ng-style="{ 'max-height' : canvasHeightNoTopNav + 'px' }"
         class="ui-nav offcanvas left"
         ng-class="{'col-xs-5 col-sm-4 col-md-9 col-lg-10 in' : !toggle.asideNav, 'col-xs-12' : toggle.asideNav }"
         role="navigation" ng-show="program">
        <%- partial('user/partials/topNav') %>
    </nav>

    <!-- Main Body -->
    <main class="canvas" ng-click="closeMenuIfSmallScreen();"
          ng-class="{'col-xs-12 col-md-9 col-lg-10' : !toggle.asideNav, 'col-md-12 col-lg-12' : toggle.asideNav }"
          ng-style="getMainCanvasStyle()">
        <%- renderBody() %>
    </main>


    <!-- Right Aside -->
    <aside ng-style="{ 'height' : canvasHeightNoTopNav + 'px' }"
           ng-class="{'hide-right' : toggle.asideNav, 'no-right' : !toggle.asideNav }"
           class="action-nav offcanvas right col-xs-7 col-sm-4 col-md-3 col-lg-2">
        <%- partial('user/partials/sidebarRight') %>
    </aside>


    <!-- Footer -->
    <footer class="container-fluid footer">
        <div class="row">
            <nav id="footerBar" class="navbar-fixed-bottom" role="navigation">
                <%- partial('user/partials/footer') %>
            </nav>
        </div>
    </footer>

</div>

<%- partial('modals/confirmModal') %>
<%- partial('modals/infoModal') %>
<%- partial('modals/todo') %>
<%- partial('modals/pendingTodos') %>
<%- partial('modals/createUserGroup') %>
<%- partial('modals/encourage') %>
<%- partial('modals/story') %>
<%- partial('modals/appreciate') %>
<%- partial('partials/videoPlayer') %>
<%- partial('partials/youTubePlayer') %>



<%- scripts({
    name: 'user',
    /*forceMinify: true,*/
    files: [
        '/js/lib/jquery.min.js',
        '/js/lib/jquery.browser.js',
        '/js/lib/bootstrap.js',
        '/js/lib/spin.min.js',
        '/js/lib/moment.js',
        '/js/lib/underscore-min.js',

        '/js/lib/angular/angular.js',
        '/js/lib/angular/angular-animate.js',
        '/js/lib/angular/angular-sanitize.js',
        '/js/lib/angular/angular-strap.min.js',
        '/js/lib/angular/angular-strap.tpl.min.js',
        '/js/lib/angular/ui-bootstrap.min.js',
        '/js/lib/angular/ui-utils.min.js',
        '/js/lib/angular/angular-spinner.js',
        '/js/lib/angular/angular-file-upload-all.min.js',
        '/js/lib/angular/angularjs-dropdown-multiselect.min.js',
        '/js/lib/angular/angular-scroll.js',
        '/js/lib/angular/ng-video.js',
        '/js/lib/angular/ng-audio.js',

        '/js/lib/highstock.js',
        '/js/lib/highcharts-ng.min.js',

        '/js/common/directives/datePickerInitialDateFix.js',
        '/js/common/services/helperService.js',
        '/js/common/directives/autoResizer.js',
        '/js/common/directives/blink.js',
        '/js/common/services/authService.js',
        '/js/common/directives/numberMask.js',
        '/js/common/services/sessionStorage.js',
        '/js/common/controllers/modals.js',

        '/js/user/app.js',
        '/js/user/controllers/layout.js',
        '/js/user/controllers/todo.js',
        '/js/user/controllers/todoManagement.js',
        '/js/user/controllers/userGroups.js',
        '/js/user/controllers/profile.js',
        '/js/user/controllers/discussion.js',
        '/js/user/controllers/view.js',
        '/js/user/controllers/inspiration.js',
        '/js/user/controllers/resources.js',
        '/js/user/controllers/dashboard.js']
}) %>

</body>
</html>

